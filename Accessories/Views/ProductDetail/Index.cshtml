@using System.Globalization
@using Accessories.Infrastructure.ViewModels
<!--Important link from https://bootsnipp.com/snippets/XqvZr-->
<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!------ Include the above in your HEAD tag ---------->

<link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800&display=swap" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<link rel="stylesheet" type="text/css" href="~/css/Productdetail/style.css" />

@{
	var product = Model;
}
@model ProductViewModel
<div class="pd-wrap">
	<div class="container">
		<div class="heading-section">
			<h2>Product Details</h2>
		</div>
		<div class="row">
			<div class="col-md-6">
				<div style="width:500px;height: auto" id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
					<ol class="carousel-indicators">
						<li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
						<li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
						<li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
					</ol>
					<div class="carousel-inner">
						<div class="carousel-item active">
							<img class="d-block w-100" src="@product.Image" alt="First slide">
						</div>
						<div class="carousel-item">
							<img class="d-block w-100" src="~/image/home/keyboard.jpg" alt="Second slide">
						</div>
						<div class="carousel-item">
							<img class="d-block w-100" src="~/image/home/monitor.jpg" alt="Third slide">
						</div>
					</div>
					<a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
						<span class="carousel-control-prev-icon" aria-hidden="true"></span>
						<span class="sr-only">Previous</span>
					</a>
					<a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
						<span class="carousel-control-next-icon" aria-hidden="true"></span>
						<span class="sr-only">Next</span>
					</a>
				</div>
			</div>
			<div class="col-md-6">
				<div class="product-dtl">
					<div class="product-info">
						<div class="product-name">@product.Name</div>
						<div class="reviews-counter">
							<div class="rate">
								<input type="radio" id="star5" name="rate" value="5" checked />
								<label for="star5" title="text">5 stars</label>
								<input type="radio" id="star4" name="rate" value="4" checked />
								<label for="star4" title="text">4 stars</label>
								<input type="radio" id="star3" name="rate" value="3" checked />
								<label for="star3" title="text">3 stars</label>
								<input type="radio" id="star2" name="rate" value="2" />
								<label for="star2" title="text">2 stars</label>
								<input type="radio" id="star1" name="rate" value="1" />
								<label for="star1" title="text">1 star</label>
							</div>
							<span>3 Reviews</span>
						</div>
						<div class="product-price-discount"><span><span id="price-product">@product.Price.ToString("N0",new CultureInfo("is-IS"))</span>@product.Unit</span><span class="line-through">1.000.000đ</span></div>
					</div>
					<p>@product.Description</p>
					<div class="row">
						<div class="col-md-6">
							<label for="size">Size</label>
							<select id="size" name="size" class="form-control">
								<option>S</option>
								<option>M</option>
								<option>L</option>
								<option>XL</option>
							</select>
						</div>
						<div class="col-md-6">
							<label for="color">Color</label>
							<select id="color" name="color" class="form-control">
								<option>Blue</option>
								<option>Green</option>
								<option>Red</option>
							</select>
						</div>
					</div>
					<div class="product-count">
						<label for="size">Quantity</label>
						<form method="post" class="display-flex">
							<div class="qtyminus" onclick="MinusQuantityProduct()">-</div>
							<input asp-for="@product.Quantity" name="quantity" type="text" value="1" class="qty" id="quantity-product">
							<div class="qtyplus" onclick="PlusQuantityProduct()">+</div>
						</form>
						<button type="submit" onclick="AdditionalProductIntoCart('@product.Id')" class="round-black-btn">Add to Cart</button>
					</div>
				</div>
			</div>
		</div>
		<div class="product-info-tabs">
			<ul class="nav nav-tabs" id="myTab" role="tablist">
				<li class="nav-item">
					<a class="nav-link active" id="description-tab" data-toggle="tab" href="#description" role="tab" aria-controls="description" aria-selected="true">Description</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" id="review-tab" data-toggle="tab" href="#review" role="tab" aria-controls="review" aria-selected="false">Reviews (0)</a>
				</li>
			</ul>
			<div class="tab-content" id="myTabContent">
				<div class="tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="description-tab">
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam.
				</div>
				<div class="tab-pane fade" id="review" role="tabpanel" aria-labelledby="review-tab">
					<div class="review-heading">REVIEWS</div>
					<p class="mb-20">There are no reviews yet.</p>
					<form class="review-form">
						<div class="form-group">
							<label>Your rating</label>
							<div class="reviews-counter">
								<div class="rate">
									<input type="radio" id="star5" name="rate" value="5" />
									<label for="star5" title="text">5 stars</label>
									<input type="radio" id="star4" name="rate" value="4" />
									<label for="star4" title="text">4 stars</label>
									<input type="radio" id="star3" name="rate" value="3" />
									<label for="star3" title="text">3 stars</label>
									<input type="radio" id="star2" name="rate" value="2" />
									<label for="star2" title="text">2 stars</label>
									<input type="radio" id="star1" name="rate" value="1" />
									<label for="star1" title="text">1 star</label>
								</div>
							</div>
						</div>
						<div class="form-group">
							<label>Your message</label>
							<textarea class="form-control" rows="10"></textarea>
						</div>
						<div class="row">
							<div class="col-md-6">
								<div class="form-group">
									<input type="text" name="" class="form-control" placeholder="Name*">
								</div>
							</div>
							<div class="col-md-6">
								<div class="form-group">
									<input type="text" name="" class="form-control" placeholder="Email Id*">
								</div>
							</div>
						</div>
						<button class="round-black-btn">Submit Review</button>
					</form>
				</div>
			</div>
		</div>

	</div>
</div>
<div class="modal-login-request" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document" style="position:relative">
		<div class="modal-content" style="position: absolute;left: 30px;top: 300px;">
			<div class="modal-header">
				<h5 class="modal-title">Thông báo</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<p>Vui lòng đăng nhập để tiếp tục mua hàng.</p>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
				<button type="button" class="btn btn-primary">Đăng nhập</button>
			</div>
		</div>
	</div>
</div>
<div class="modal-success-order" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document" style="position:relative">
		<div class="modal-content" style="position: absolute;left: 30px;top: 300px;">
			<div class="modal-header">
				<h5 class="modal-title">Thông báo</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<p>Thêm sản phẩm thành công.</p>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
				<button type="button" class="btn btn-primary">Tiếp tục mua sắm</button>
			</div>
		</div>
	</div>
</div>
<script>
	$(document).ready(function () {
		$('#myModal').on('shown.bs.modal', function () {
		  $('#myInput').trigger('focus')
			})
	});
	function MinusQuantityProduct()
	{
		var input = $('#quantity-product').val();
		let myInput = document.querySelector('input[name="quantity"]');	
		var number = 1;
		if(input != '1')
		{
			var number = parseInt(input) - 1;
			myInput.value = number.toString();
		}
		var price = '@product.Price';
		var priceInput = document.querySelector('#price-product');
		priceInput.innerHTML = (parseInt(price) * parseInt(number)).toString();
	}
	function PlusQuantityProduct() {
		var input = $('#quantity-product').val();
		let myInput = document.querySelector('input[name="quantity"]');
		var number = parseInt(input) + 1;
		myInput.value = number.toString();
		var price = '@product.Price';
		var priceInput = document.querySelector('#price-product');
		priceInput.innerHTML = (parseInt(price) * parseInt(number)).toString();

	}
	function AdditionalProductIntoCart(id)
	{
		var quantity = $('#quantity-product').val();
		$.ajax({
			cache: true,
			url: '@Url.Action("AdditionalCart", "Cart")',
			type: 'POST',
			data: { id: id, quantity: parseInt(quantity) },
			success: function (result) {
			    console.log(result);
			},
			error: function (err) {
			    console.log(err);
			}
		});
		$('.modal').show();
	}
</script>